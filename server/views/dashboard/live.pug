extends ../layout

append head
  title #{project} Collaborations - Constellation

block content
  .row: .col-xs-12
    a#back(href=`/dashboard/`) all projects
    h2 #{project} collaborations
      br
      |  #[small #[span.label.label-success current] collabs]

  .row: .col-xs-12: .form-horizontal
    .form-group
      label.col-xs-2.col-sm-1.control-label Search
      .col-xs-8.col-sm-6
        input#search.form-control(type='text')
      .col-xs-2.col-sm-1
        small#matches
      .col-xs-6.col-sm-2: label.radio.control-label
        input#condensed(type='checkbox')
        | Condensed view
      .col-xs-6.col-sm-2: label.radio.control-label
        input#autoscroll(type='checkbox')
        | Scroll to edits
  
  #collabs.row
  
  #dupes-header.row.faded.hidden: .col-xs-12: h3 No longer active
  
  #dupes.row.faded
  
  #mismatch-header.row.hidden: .col-xs-12: h3 Collaboration not found
  
  #mismatch.row
  
  template#collab
    .collab.disconnected.col-xs-12.col-sm-6.col-md-4: .tile.panel.panel-default: .panel-body
      h4: a
      span.typing-icon.glyphicon.glyphicon-option-horizontal
      | &nbsp;
      span.error-icon.glyphicon.glyphicon-exclamation-sign
      .code
      .images

  template#file
    .file
      h5.filepath
      pre.diff: code.java
  
  script.
    var shareURL = !{JSON.stringify(shareURL)};
    var project = !{JSON.stringify(project)};
    var cutoff = undefined;
    var milestone = undefined;
  script(src='/public/sharedb.js')
  script(src='/public/moment.js')
  script(src='/public/diff.js')
  script(src='//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/highlight.min.js')
  script(src='/static/queryparams.js')
  script(src='/static/dashboard/collabs.js')
  script(src='/static/dashboard/live.js')

  style.
    .condensed .panel {
      background: #444;
    }
    .condensed .code {
      background: #444;
    }
    .condensed .code h5 {
      font-size; 8px;
      margin: 0;
      color: gray;
    }
    .condensed .diff-part:not(.diff-added) {
      font-size: 0.5px;
      background: #222;
    }
    .condensed .diff-added {
      background: #fffbeb;
    }
    .disconnected .panel {
      background: lightgray;
    }
    .disconnected a {
      color: gray;
    }
    .match .panel {
      background: lightgreen;
    }
    .disconnected .code {
      background: lightgray;
    }
    .error-icon {
      opacity: 0;
    }
    .error .error-icon {
      color: #a94442;
      opacity: 1;
    }
    .warning .error-icon {
      color: #faebcc;
      opacity: 1;
    }
    .typing-icon {
      color: lightgray;
      opacity: 0;
    }
    .typing .typing-icon {
      opacity: 1;
    }
    .code {
      max-height: 150px;
      overflow: hidden;
      background: white;
    }
    .code:hover {
      overflow: auto;
    }
    .code .diff {
      overflow: hidden;
    }
    .code .diff code {
      font-size: 8px;
    }
    .panel-body {
      position: relative;
    }
    .images {
      position: absolute;
      top: 10px;
      right: 10px;
    }
    .images img {
      height: 50px;
      width: 50px;
    }
